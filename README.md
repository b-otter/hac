1. Обзор потребителей и аномалий
Этот раздел предоставляет общий взгляд на всех потребителей и помогает быстро идентифицировать тех, кто значительно отклоняется от нормы потребления.

Фильтрация потребителей: Возможность просматривать всех потребителей, отдельно коммерческих или некоммерческих объектов.
Выделение отклонений: Указание минимального процента отклонения от нормы потребления, чтобы система автоматически подсвечивала или отфильтровывала пользователей, чье потребление превышает этот порог.
Быстрый поиск: Отображение общего количества найденных потребителей, соответствующих заданным критериям.
Детальный список потребителей: Таблица с основной информацией о каждом потребителе:
Уникальный номер лицевого счета.
Тип потребителя (например, частный дом, офис).
Полный адрес объекта.
Количество зарегистрированных контактов.
Размер жилого фонда или площади объекта.
Установленная норма потребления электроэнергии.
Процентное отклонение фактического потребления от нормы.
Действия по анализу: Специальные кнопки для запуска подробного анализа потребления (АПП, ЦВАН) для каждого пользователя, помогающие понять причины отклонений.
Визуализация на карте: Возможность мгновенно отобразить местоположение каждого потребителя на интерактивной карте, чтобы оценить его окружение и тип строения.
Удобная навигация: Простая постраничная навигация для просмотра больших списков потребителей.
2. Анализ потребителей с высоким потреблением за период
Этот раздел специально разработан для выявления и детального изучения тех, кто потребляет значительные объемы электроэнергии в течение определенного времени.

Гибкая фильтрация: Возможность выбора и применения фильтров по типу потребителя для сужения поиска.
Таблица высокопотребляющих объектов: Представление данных в удобном табличном формате, включающем:
Идентификатор объекта.
Год учета.
Полный адрес.
Детальный тип объекта (например, частный, коммерческий, производственный), полученный из внешних источников.
Площадь объекта.
Общее потребление электроэнергии за выбранный период.
Разбивка потребления по месяцам (например, октябрь, ноябрь, декабрь и т.д. до апреля) для отслеживания динамики.
Среднее потребление за весь анализируемый период.
Управление списком: Простая навигация по страницам, чтобы просматривать всех выявленных потребителей с высоким потреблением.
3. Интерактивная карта и проверка объектов
Этот функционал значительно расширяет возможности анализа, позволяя визуально проверять объекты и получать дополнительную информацию.

Отображение объектов на карте: При клике на кнопку для каждого потребителя, его местоположение мгновенно отображается на карте прямо в приложении. Это позволяет увидеть объект в контексте его окружения.
Автоматическое определение типа строения: Система автоматически определяет тип строения (например, жилой дом, офис, магазин, склад) и его основное назначение или род деятельности, основываясь на данных карт. Это критически важно для понимания, является ли здание коммерческим или некоммерческим.
Идентификация "нецелевого использования": Сопоставление фактического потребления с типом строения и родом деятельности помогает выявлять случаи, когда потребление электроэнергии не соответствует заявленному назначению объекта (например, высокое потребление в некоммерческом здании, которое может использоваться в коммерческих целях).
4. Управление данными
Этот раздел обеспечивает удобство работы с информацией, минимизируя ручной труд.

Прямая загрузка данных: Возможность загружать данные о потребителях и их потреблении напрямую в систему из файлов. Это исключает необходимость ручного ввода и обеспечивает актуальность информации.
Автоматическая обработка: Система автоматически обрабатывает загруженные данные, распределяет их по соответствующим категориям и обновляет информацию о потребителях.
В целом, этот сервис представляет собой мощный инструмент для мониторинга, анализа и оптимизации потребления электроэнергии, позволяя оперативно выявлять и реагировать на любые аномалии или потенциальное нецелевое использование ресурсов.

2. Frontend

На сайте слева расположен блок с заголовком "Данные". Под ним находится второй блок, позволяющий выбрать файл с данными и загрузить их на платформу. Еще ниже размещен третий блок, предназначенный для анализа потребления электроэнергии, где пользователь может выбрать конкретного потребителя из обширного списка доступных вариантов.  

С правой стороны от этих трех блоков находится основной информационный блок, отображающий детализированную информацию о потреблении электроэнергии. В разделе "Фильтр потребителей" представлена настройка "Тип потребителя" с тремя переключаемыми кнопками: "Все", "Коммерческие" и "Некоммерческие". При выборе одного из вариантов таблица автоматически обновляется, показывая только соответствующие данные.  

Под фильтром "Тип потребителя" расположен блок "Минимальное отклонение (%)", позволяющий задать порог для отображения записей. Еще ниже находится блок "Найдено потреблений", который отображает общее количество записей, соответствующих заданным критериям.  

Под всеми этими элементами размещена таблица с подробными данными. В ней представлены следующие колонки:  
- Лицевой счет – идентификатор потребителя;  
- Тип – категория потребителя (коммерческий/некоммерческий);  
- Адрес – местоположение объекта;  
- Комнат – количество комнат (для жилых помещений);  
- Жильцов – число проживающих;  
- Потребление – объем использованной электроэнергии;  
- Норматив – установленный норматив потребления;  
- Отклонение – разница между фактическим потреблением и нормативом;  
- Avito – ссылка на поиск объявлений по данному адресу на Avito;  
- ЦИАН – ссылка на поиск объявлений на ЦИАН;  
- Карта – кнопка, перенаправляющая на карту и показывающая местоположение объекта.  

также при нажатии на кнопку на карте перед пагинацией появляется карта с отображением точки на карте
Под таблицей реализована пагинация, упрощающая навигацию по большому количеству записей и позволяющая пользователю быстро переключаться между страницами.


Описание дополнительной таблицы на сайте  

Под таблицей "Фильтр потребителей" расположена вторая таблица с заголовком "Потребители с потреблением более 3000 кВт/ч (октябрь – апрель)".  

Над таблицей находится фильтр, аналогичный предыдущему – с переключателями "Все", "Коммерческие" и "Некоммерческие". Это позволяет пользователю быстро отфильтровать записи и просматривать только нужные данные.  

Таблица содержит следующие колонки:  
- "ID" – уникальный идентификатор потребителя,  
- "Коммерческий" – указание на тип потребителя,  
- "Адрес" – местонахождение объекта,  
- "Тип здания" – категория строения,  
- "Комнат" – количество комнат,  
- "Жильцов" – число проживающих,  
- "Площадь" – общая площадь помещения,  
- "Окт", "Ноя", "Дек", "Янв", "Фев", "Мар", "Апр" – данные о потреблении по месяцам,  
- "Ср. потребл. (окт-апр)" – средний показатель потребления за указанный период.  

В нижней части таблицы, как и в предыдущем случае, предусмотрена пагинация для удобного переключения между страницами с данными.  

Таким образом, пользователь может легко анализировать информацию о потребителях с высоким энергопотреблением в течение зимних месяцев.

3. backend

- Центральный узел связи:
Сервер постоянно "слушает" запросы от вашего фронтенд-приложения (того, что вы видите в браузере). Он настроен так, чтобы принимать запросы с любого источника, что удобно для разработки.
- Подключение к базе данных:
Самая важная часть работы сервера — это управление информацией. Он напрямую подключен к базе данных MySQL, которая служит хранилищем всех ваших данных о потребителях электроэнергии. Перед началом работы сервер убеждается, что соединение с базой данных установлено и стабильно.

- Предоставление данных для отображения:
Когда фронтенд-приложение запрашивает информацию (например, список всех потребителей, данные о нормативах или список потребителей с высоким потреблением), сервер обращается к базе данных, извлекает нужные сведения и отправляет их обратно во фронтенд в удобном для отображения виде.

Получение всех потребителей: Сервер может предоставить полный список всех зарегистрированных потребителей с их основными данными (лицевой счет, адрес, тип, площадь, количество комнат/жильцов и помесячное потребление).
Получение нормативов: Он также может отдать данные о нормативах потребления, которые используются для расчета отклонений.
Выявление "высоких" потребителей: Сервер автоматически рассчитывает среднее потребление за определенный период (октябрь-апрель) для каждого пользователя и отбирает только тех, кто превысил заданный порог (например, 3000 кВт·ч). Он сортирует этот список, чтобы наиболее "прожорливые" пользователи были в начале.
- Загрузка новых данных:
Это ключевой функционал для обновления информации.

Когда вы загружаете файл (например, JSON с новыми данными о потребителях) через приложение, сервер получает этот файл.
Он временно сохраняет его, затем читает содержимое и преобразует его в формат, который можно сохранить в базе данных.
Сервер интеллектуально обновляет или добавляет новые записи о потребителях в вашу базу данных. Если потребитель с таким лицевым счетом уже есть, его данные обновятся; если нет — добавится новая запись.
После успешной обработки файл удаляется, чтобы не занимать место.
В случае ошибки при загрузке (например, неверный формат файла), сервер сообщит об этом и удалит некорректный файл.
- Специальная функция для обхода ограничений (ProxyCrawl):
Сервер содержит дополнительный инструмент, который позволяет ему безопасно получать информацию с других веб-сайтов, обходя возможные блокировки. Это полезно, если в будущем понадобится автоматически собирать какие-то общедоступные данные из интернета, например, для обогащения информации о зданиях.

Таким образом, сервер действует как невидимый посредник, который организует хранение, обработку и предоставление всех необходимых данных, делая работу вашего приложения плавной и эффективной.

- Алгоритм проверки адресов

- Вы выбираете файл (например, со списком лицевых счетов и адресов).
-Приложение начинает постепенно просматривать каждый адрес из вашего файла.
-Для каждого адреса оно обращается к внешнему картографическому сервису (2ГИС), отправляя ему запрос "Что это за адрес?".
-Картографический сервис отвечает информацией о здании по этому адресу. Эта информация может включать, например, его назначение (например, "жилой дом", "офисный центр", "магазин", "больница" и т.д.).
-Приложение анализирует полученное описание от карты. Оно имеет внутренний список ключевых слов, которые обычно указывают на коммерческую деятельность (например, "магазин", "офис", "ресторан", "клиника").
-Если описание адреса содержит одно из этих "коммерческих" слов, приложение помечает этот объект как "коммерческий".
-Если таких слов не найдено, оно считает объект "некоммерческим" (например, жилым домом).
-Этот процесс повторяется для каждого адреса в вашем файле, и приложение показывает вам прогресс и количество уже определенных коммерческих и некоммерческих объектов.
-В итоге, все данные (включая новую информацию о типе здания) отправляются на сервер для сохранения, и вы можете скачать обновленный файл, если хотите.
-Проще говоря, это как автоматический детектив адресов, который использует картографические данные, чтобы понять, для каких целей используется здание, и классифицировать его.
